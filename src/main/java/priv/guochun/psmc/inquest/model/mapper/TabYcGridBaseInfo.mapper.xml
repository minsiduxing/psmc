<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="priv.guochun.psmc.inquest.model.TabYcGridBaseInfo">
    <select id="selectGridInfoList" resultType="java.util.Map" parameterType="hashmap">
        SELECT a.*,b.DICT_NAME as IS_CONFIGED_RULE_NAME,c.group_name as ORG_NAME   FROM
            (    SELECT
            A.GRID_UUID, A.GRID_NAME, A.ORG_CODE, A.GRID_MODEL_TYPE, A.GRID_PEPOLE_COUNT, A.PLANNING_ISSUE_CERT_TOTAL,
            A.ACTUAL_ISSUE_CERT_TOTAL, A.IS_MAINTAIN_COORDINATE, A.GRID_COORDINATE,A.MODIFY_TIME, A.CREATOR,
            A.CREATE_TIME,(CASE WHEN B.GRID_MTYPE_UUID IS NOT NULL THEN '1' ELSE '0' END) AS IS_CONFIGED_RULE,B.GRID_MTYPE_NAME,B.LEGAL_PROVISION_DESC
            FROM TAB_YC_GRID_BASE_INFO A LEFT JOIN TAB_YC_GRID_MODEL_TYPE B ON A.GRID_MODEL_TYPE = B.GRID_MTYPE_UUID
            where 1=1 AND B.IS_ACTIVE=1
            ) a,tab_data_dict b,tab_group c where a.IS_CONFIGED_RULE=b.DICT_ID and b.DICT_NO='IF' and a.ORG_CODE=c.group_code
        order by a.ORG_CODE,a.CREATE_TIME desc
    </select>

</mapper>